<form class="form-signin form-signup hide" role="form">
    <div class="page-card-body">
        <div class="form-group d-flex align-items-center">
            <label class="form-label sr-only" for="signup_fullname">{{ _("Full Name") }}</label>
            <div class="flex-grow-1 position-relative">
                <input type="text" id="signup_fullname" class="form-control pr-4" name="fullname"
                    placeholder="{{ _('First name + Last name') }}" required autofocus autocomplete="name">
                <span class="text-danger required-asterisk" title="required">*</span>
            </div>
        </div>
        <div class="form-group d-flex align-items-center">
            <label class="form-label sr-only" for="signup_email">{{ _("Email") }}</label>
            <div class="flex-grow-1 position-relative">
                <input type="email" id="signup_email" class="form-control pr-4" name="email"
                    placeholder="{{ _('Email') }}" required autocomplete="username">
                <span class="text-danger required-asterisk" title="required">*</span>
            </div>
        </div>
    </div>
    <div class="page-card-actions">
        <button id="submit" class="btn btn-sm btn-primary btn-block btn-signup"
            type="submit">{{ _("Sign up") }}</button>
        <p class="text-center sign-up-message">
            <a href="#login" class="blue">{{ _("Have an account? Login") }}</a>
        </p>
    </div>
</form>

<script>
	frappe.ready(() => {
		 $(".signup-form").on("submit", (e) => {
            signup(e);
        });
	});

	const signup = (e) => {
        e.preventDefault();
        const email = ($("#signup_email").val() || "").trim();
        const full_name = frappe.utils.xss_sanitise(($("#signup_fullname").val() || "").trim());

        if (!email || !validate_email(email) || !full_name) {
            login.set_status('{{ _("Valid email and name required") }}', 'red');
            return false;
        }

        frappe.call({
            method: "highskills_erpnext.highskills_erpnext.user.sign_up",
            args: {
                "email": email,
                "full_name": full_name,
            },
            statusCode: login.login_handlers
        })
        return false;
    }
</script>

{% block style %}
<style>
	.password-strength-indicator {
		float: right;
		padding: 15px;
		margin-top: -38px;
		margin-right: -7px;
	}

	.password-strength-message {
		margin-top: -10px;
	}
    .form-control.d-inline-block {
        display: inline-block;
        width: auto;
        vertical-align: middle;
        min-width: 220px;
    }
    .align-middle {
        vertical-align: middle;
    }
    .position-relative { position: relative; }
    .required-asterisk {
        position: absolute;
        right: 16px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 1.2em;
        pointer-events: none;
    }
    .flex-grow-1 { flex-grow: 1; }
    .d-flex { display: flex; }
    .align-items-center { align-items: center; }
    .pr-4 { padding-right: 2rem !important; }
</style>
{% endblock %}
